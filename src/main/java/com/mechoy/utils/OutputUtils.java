package com.mechoy.utils;

import java.io.*;
import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class OutputUtils {

    /**
     * 进行编码，多层编码的方式，循环进行
     * @param bytes
     * @param type
     * @return
     */
    public static String encoding(byte[] bytes, String type) {
        String result = new String(bytes);
        String[] split = type.split("\\+");
        for (int i = 0; i < split.length; i++) {
            switch (split[i]) {
                case "base64":
                    result = byteToBase64(bytes);
                    continue;
                case "url":
                    result = EncodingUtils.encodingUrl(result);
                    continue;
                default:
                    continue;
            }
        }
        return result;
    }


    /**
     * 将对象转为字节数组
     *
     * @param obj 将要转的对象
     * @return
     */
    public static byte[] objectToByte(Object obj) {
        ByteArrayOutputStream b = null;
        try {
            b = new ByteArrayOutputStream();
            ObjectOutput a = new ObjectOutputStream(b);

            // write and flush the object content to byte array
            a.writeObject(obj);
            a.flush();
            a.close();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        return b.toByteArray();
    }

    /**
     * 字节数组转base64
     *
     * @param b 要转换的数组
     * @return 转换完成的字符串
     */
    public static String byteToBase64(byte[] b) {
        return Base64.getEncoder().encodeToString(b);
    }




}
